<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Introduction</title>
<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../index.html" title="Chapter&#160;1.&#160;Boost.Mixin 0.1">
<link rel="up" href="../index.html" title="Chapter&#160;1.&#160;Boost.Mixin 0.1">
<link rel="prev" href="../index.html" title="Chapter&#160;1.&#160;Boost.Mixin 0.1">
<link rel="next" href="overview.html" title="Overview">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="overview.html"><img src="../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="boost_mixin.introduction"></a><a class="link" href="introduction.html" title="Introduction">Introduction</a>
</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="introduction.html#boost_mixin.introduction.intro_ecs">Introduction to Mixins</a></span></dt>
<dt><span class="section"><a href="introduction.html#boost_mixin.introduction.boost_mixin">Boost.Mixin</a></span></dt>
<dt><span class="section"><a href="introduction.html#boost_mixin.introduction.bm_as_an_ecs">Boost.Mixin as
      an entity-component system</a></span></dt>
<dt><span class="section"><a href="introduction.html#boost_mixin.introduction.ruby_smalltalk">Comparison to
      Ruby and Smalltalk mixins</a></span></dt>
</dl></div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_mixin.introduction.intro_ecs"></a><a class="link" href="introduction.html#boost_mixin.introduction.intro_ecs" title="Introduction to Mixins">Introduction to Mixins</a>
</h3></div></div></div>
<p>
        <a class="indexterm" name="idp29808000"></a>
      </p>
<p>
        Speaking generally a mixin is a class that provides a certain functionality
        to be reused by other classes. This general definition applies to almost
        everything. One could say that all forms of composition and inheritance are
        uses of mixins.
      </p>
<p>
        Many C++ users are familiar with the word mixin as a form of <a href="http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern" target="_top">CRTP</a>
        and this is indeed an appropriate name for some cases, although probably
        a the term "trait" (as in PHP's traits) would have been even better.
      </p>
<p>
        In most languages that explicitly say that they natively support mixins,
        a mixin is a runtime idiom, much like the components from an entity-component
        system.
      </p>
<p>
        For more details you can check <a href="http://en.wikipedia.org/wiki/Mixin" target="_top">Wikipedia's
        article on Mixin</a>, but speaking generally may be more confusing than
        helpful. Let's focus on the particular case of Boost.Mixin.
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_mixin.introduction.boost_mixin"></a><a class="link" href="introduction.html#boost_mixin.introduction.boost_mixin" title="Boost.Mixin">Boost.Mixin</a>
</h3></div></div></div>
<p>
        In short Boost.Mixin is a way of allowing the construction and modification
        of types at runtime.
      </p>
<p>
        Here's some code, which probably is the fastest way of understanding what
        Boost.Mixin is about:
      </p>
<pre class="programlisting"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">mixin</span><span class="special">;</span>
<span class="identifier">object</span><span class="special">*</span> <span class="identifier">o</span> <span class="special">=</span> <span class="keyword">new</span> <span class="identifier">object</span><span class="special">;</span> <span class="comment">// just an empty object</span>

<span class="comment">// xml_serializer and book_data are some classes in the project</span>
<span class="comment">// there are external macros you need to call, to make them available as</span>
<span class="comment">// mixins</span>
<span class="identifier">mutate</span><span class="special">(</span><span class="identifier">o</span><span class="special">)</span>
    <span class="special">.</span><span class="identifier">add</span><span class="special">&lt;</span><span class="identifier">xml_serializer</span><span class="special">&gt;()</span>
    <span class="special">.</span><span class="identifier">add</span><span class="special">&lt;</span><span class="identifier">book_data</span><span class="special">&gt;();</span>

<span class="comment">// now o has internally instantiated an xml_serializer and book_data</span>
<span class="comment">// it can be thought of a class that's been derived from them via</span>
<span class="comment">// multiple inheritance</span>

<span class="comment">// ...</span>
<span class="identifier">set_title</span><span class="special">(</span><span class="identifier">o</span><span class="special">,</span> <span class="string">"The Three Musketeers"</span><span class="special">);</span> <span class="comment">// this will internally call</span>
                                      <span class="comment">// book_data::serialize</span>
<span class="identifier">serialize</span><span class="special">(</span><span class="identifier">o</span><span class="special">);</span> <span class="comment">// this will internally call xml_serialier::serialize</span>

<span class="identifier">mutate</span><span class="special">(</span><span class="identifier">o</span><span class="special">)</span>
    <span class="special">.</span><span class="identifier">remove</span><span class="special">&lt;</span><span class="identifier">xml_serializer</span><span class="special">&gt;()</span>
    <span class="special">.</span><span class="identifier">add</span><span class="special">&lt;</span><span class="identifier">json_serializer</span><span class="special">&gt;();</span>

<span class="comment">// now o has destroyed its xml_serializer instance and added a</span>
<span class="comment">// json_serializer instead</span>

<span class="identifier">serialize</span><span class="special">(</span><span class="identifier">o</span><span class="special">);</span> <span class="comment">// will now call json_serializer::serialize</span>
</pre>
<p>
        This is given, while also having full abstraction between the interface and
        the definition of types - a problem often given as the motivation for the
        <a href="http://www.drdobbs.com/cpp/making-pimpl-easy/205918714" target="_top">PIMPL
        idiom</a>. When constructing objects from mixin, only the forward declaration
        is needed. When calling messages only the message declaration is needed.
      </p>
<p>
        In the aforementioned example the code works without the need to include
        the definiton of the serializer classes or data classes. The mutation parts
        of the code, require only the the to see the macro <code class="computeroutput"><span class="identifier">BOOST_DECLARE_MIXIN</span><span class="special">(</span><span class="identifier">type_name</span><span class="special">)</span></code> for the mixins used. The message calls require
        only the message declarations, thus making their compilation units completely
        oblivious to what minxins might actually comprise this object.
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_mixin.introduction.bm_as_an_ecs"></a><a class="link" href="introduction.html#boost_mixin.introduction.bm_as_an_ecs" title="Boost.Mixin as an entity-component system">Boost.Mixin as
      an entity-component system</a>
</h3></div></div></div>
<p>
        If you're familiar with entitny-component systems, one way of looking at
        at the library is as if it is one of those, and indeed, it has many features
        that are characteristic for such systems.
      </p>
<p>
        If you're not familiar with entity-component systems, you might want to check
        out the <a class="link" href="appendix.html#boost_mixin.appendix.app_ecs" title="Appendix A. Entity-component systems">appendix entry</a>
        on them.
      </p>
<p>
        Here's how Boost.Mixin is like an ECS:
      </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
            <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">mixin</span><span class="special">::</span><span class="identifier">object</span></code> can be interpreted as an entity
            in an ECS. It's just an empty class, that needs to be "built"
            from mixins.
          </li>
<li class="listitem">
            consequently mixins can be thought of as a component. You use mixins
            to build objects, as you use components to build entities.
          </li>
</ul></div>
<p>
        However, Boost.Mixin is not strictly an ECS. Here's a list of the differences.
      </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
            It is non-intrusive: Mixins don't need to inherit from a common parent,
            nor do you need to change the code of a class to "turn it into"
            a mixin.
          </li>
<li class="listitem">
            Instead of classes with pure virtual methods, messages are used to represent
            the functional interface of mixins, and through that of objects.
          </li>
<li class="listitem">
            Some entity-component systems allow serveral entities to point to the
            same instance of a component. This is not possible in Boost.Mixin. An
            mixin instance is bound to an object instance
          </li>
</ul></div>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_mixin.introduction.ruby_smalltalk"></a><a class="link" href="introduction.html#boost_mixin.introduction.ruby_smalltalk" title="Comparison to Ruby and Smalltalk mixins">Comparison to
      Ruby and Smalltalk mixins</a>
</h3></div></div></div>
<p>
        If you're familiar with the mixins in Ruby, Groovy, Smalltalk, Squeak and
        many other languages, you might find them similar to Boost.Mixin. They all
        allow runtime modifincation of the object's interface, with the cost of having
        runtime (as opposed to compile-time) errors when a message is called for
        an object that doesn't implement it. However, unlike the mixins in the aforementioned
        languages you cannot add them to an existing class. You must use <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">mixin</span><span class="special">::</span><span class="identifier">object</span></code> instead.
      </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2013 Borislav Stanimirov, Zahary Karadjov<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>).
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="overview.html"><img src="../images/next.png" alt="Next"></a>
</div>
</body>
</html>
