#
# Copyright (c) 2013 Borislav Stanimirov, Zahary Karadjov
#
# Distributed under the Boost Software License, Version 1.0.
# See accompanying file LICENSE_1_0.txt or copy at
# http:#www.boost.org/LICENSE_1_0.txt
#

import testing ;

project boost/mixin/test
    : requirements
        # not realy a requirement but for now it's easier this way
        <toolset>gcc:<cxxflags>-std=c++0x
        <toolset>clang:<cxxflags>-std=c++0x
        <library>../build//boost_mixin
        # can't use this while not part of boost
        # <library>/boost/test//boost_unit_test_framework
        # instead use this
        <target-os>linux:<file>/usr/lib/libboost_unit_test_framework.so
    ;

rule test_all
{
    local all_tests = ;

    all_tests += [ run core.cpp ] ;
    all_tests += [ run combinators.cpp ] ;
    all_tests += [ run cxx11.cpp ] ;
    all_tests += [ run allocators.cpp ] ;
    all_tests += [ run alignment.cpp ] ;

    for local mutation_rule_test in [ glob mutation_rules/*.cpp ]
    {
        all_tests += [ run $(mutation_rule_test) ] ;
    }

    return $(all_tests) ;
}

test-suite mixin
    :
        [ test_all r ]
    ;
